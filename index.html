<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1 Year Anniversary</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    color: #f2eee7;
    overflow-x: hidden;
    background-color: #590818;
    transition: background-color 1.5s ease;
  }

  /* PASSWORD */
  .password-gate {
    position: fixed; inset: 0;
    background-color: #1a0d0d;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    z-index: 10000;
    transition: opacity 1s ease;
  }
  .password-gate input, .password-gate button { border: none; border-radius: 20px; outline: none; }
  .password-gate h2 { color: #f2eee7; margin-bottom: 20px; }
  .password-gate input { padding: 10px 20px; font-size: 1em; text-align: center; background-color: #f2eee7; color: #3b2f2f; }
  .password-gate input.wrong { background-color: #ffb3b3; color: #590818; }
  .password-gate button { margin-top: 15px; padding: 10px 25px; background-color: #590818; color: #f2eee7; cursor: pointer; }
  .password-gate button:hover { background-color: #7a1b27; }

  /* OVERLAY */
  .intro-overlay {
    position: fixed; inset: 0;
    display: none; align-items: center; justify-content: center;
    flex-direction: column; background-color: #590818;
    color: #f2eee7; z-index: 9999; overflow: hidden; cursor: pointer;
  }
  .floating-icons { position: absolute; inset: 0; overflow: hidden; z-index: 0; }
  .floating-icon { position: absolute; font-size: 2em; opacity: 0.6; animation: floatUp 6s linear infinite; }
  @keyframes floatUp { 0%{transform:translateY(0) scale(1);opacity:0.8;} 80%{opacity:1;} 100%{transform:translateY(-120vh) scale(0.9);opacity:0;} }
  .intro-overlay span, .intro-overlay small { position: relative; z-index: 2; }
  .intro-overlay span { font-size: 2em; margin-bottom: 20px; white-space: pre; }
  .intro-overlay .line2 { font-size: 1.5em; margin-top:0; }
  .intro-overlay small { font-size:0.6em; font-weight:300; opacity:0; margin-top:25px; transition:opacity 1.5s ease; }
  .intro-overlay small.visible { opacity:0.8; }

  /* NIGHT SKY */
  .sky { position: fixed; inset:0; overflow:hidden; z-index:-5; background: radial-gradient(circle at 50% 80%, #0b0b1a 0%, #01010a 100%); }
  .moon { position:absolute; top:5%; right:8%; width:160px; height:160px; background: radial-gradient(circle at 30%30%, #fff,#ddd 60%,#aaa 100%); border-radius:50%; box-shadow:0 0 50px 20px rgba(255,255,200,0.4); transform:scale(1); transition:transform 1.5s ease-out,opacity 1.5s ease-out; }
  .star { position:absolute; background:white; border-radius:50%; opacity:0.8; animation: twinkle 2s infinite ease-in-out; }
  @keyframes twinkle { 0%,100%{opacity:0.2;} 50%{opacity:1;} }
  .shooting-star { position:absolute; width:120px; height:2px; background:linear-gradient(90deg, rgba(255,255,255,1), rgba(255,255,255,0)); opacity:0; transform:rotate(-30deg); filter:drop-shadow(0 0 6px white); animation:shoot 1.8s ease-out forwards; }
  @keyframes shoot { 0%{opacity:1;transform:translate(0,0) rotate(-30deg);} 70%{opacity:1;transform:translate(300px,150px) rotate(-30deg);} 100%{opacity:0;transform:translate(450px,250px) rotate(-30deg);} }

  /* SECTIONS */
  section { opacity:0; transform:translateY(50px); transition:opacity 1s ease, transform 1s ease; padding:200px 20px; text-align:center; }
  section:first-of-type{ padding-top:430px; }
  section.visible{ opacity:1; transform:translateY(0); }

  .timeline { position:relative; width:80%; margin:120px auto; max-width:600px; text-align:left; }
  .event { margin:120px 0; position:relative; }
  .event::before { content:""; position:absolute; left:50%; top:-80px; width:4px; height:160px; background:#f2eee7; transform:translateX(-50%); }
  .footstep { position:absolute; width:30px; height:30px; opacity:0; transition:0.5s; }
  #leftFoot{ transform:rotate(-20deg); }
  #rightFoot{ transform:rotate(20deg); }

  .tab { display:inline-block; background-color:rgba(229,225,216,0.8); color:#3b2f2f; padding:10px 20px; margin:10px; border-radius:20px; cursor:pointer; transition:0.3s; }
  .tab:hover{ background-color:#d8d4c7; }
  .letter { display:none; margin:20px auto; max-width:500px; background-color:rgba(247,244,238,0.9); padding:20px; border-radius:15px; color:#3b2f2f; box-shadow:0 0 10px rgba(0,0,0,0.3); }

  /* üéØ Mini game tr√°i tim */
  :root {
    --size: 450px;
    --cell: calc(var(--size) / 3);
  }
  .board-wrap {
    width: var(--size);
    height: var(--size);
    position: relative;
    clip-path: polygon(
      50% 92%, 20% 70%, 7% 45%, 20% 25%, 38% 10%, 50% 22%, 62% 10%, 80% 25%, 93% 45%, 80% 70%
    );
    background: linear-gradient(180deg, #fff, #ffeaf2);
    border: 3px solid #ffb5ce;
    box-shadow: 0 6px 20px rgba(214, 51, 108, 0.15);
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    margin: 0 auto;
  }
  .slot {
    border: 1px dashed rgba(150,150,150,0.25);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: transparent;
  }
  .slot.highlight { outline: 3px dashed rgba(214,51,108,0.45); }
  #pieces { width: var(--size); display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; margin: 15px auto; }
  .piece {
    width: var(--cell);
    height: var(--cell);
    border: 1px solid #888;
    background-image: url("WILL1.jpg");
    background-size: var(--size) var(--size);
    cursor: grab;
    user-select: none;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  }
  .slot .piece { width: 100%; height: 100%; border: none; cursor: default; box-shadow: none; }
  button { background:#d6336c; color:white; border:none; padding:10px 16px; border-radius:6px; cursor:pointer; font-size: 1rem; }
  button:hover { background:#b72559; }
</style>
</head>
<body>

<!-- PASSWORD -->
<div class="password-gate" id="passwordGate">
  <h2>Enter the password to continue üíå</h2>
  <input type="password" id="pwInput" placeholder="Enter password...">
  <button onclick="checkPassword()">Enter</button>
</div>

<!-- INTRO -->
<div class="intro-overlay" id="intro">
  <div class="floating-icons" id="floatingIcons"></div>
  <span id="line1"></span>
  <span id="line2" class="line2"></span>
  <small id="clickText">(Click anywhere to continue)</small>
</div>

<!-- BACKGROUND -->
<div class="sky" id="sky">
  <div class="moon" id="moon"></div>
</div>

<!-- CONTENT -->
<section id="section1">
  <h1>Happy 1 Year Anniversary ‚ù§Ô∏è</h1>
  <p>Each step, each laugh, each tear... brought us closer together.</p>
</section>

<section id="timeline-section">
  <h2>Our Journey üåô</h2>
  <div class="timeline">
    <div class="footstep" id="leftFoot">üë£</div>
    <div class="footstep" id="rightFoot">üë£</div>
    <div class="event">‚ú® The First Message</div>
    <div class="event">üíå The First Date</div>
    <div class="event">üå∏ The First "I Love You"</div>
    <div class="event">üåï Our 1st Anniversary</div>
  </div>
</section>

<section>
  <h2>Love Letters üíñ</h2>
  <div class="tab" onclick="showLetter('letter1')">Letter 1</div>
  <div class="tab" onclick="showLetter('letter2')">Letter 2</div>
  <div id="letter1" class="letter">
    <h3>Letter 1</h3>
    <p>My love, this year with you has been amazing. Every moment with you is precious...</p>
  </div>
  <div id="letter2" class="letter">
    <h3>Letter 2</h3>
    <p>I still remember the day we met, and I cherish every day spent with you...</p>
  </div>
</section>

<!-- ‚ù§Ô∏è Mini Game -->
<section>
  <h2>üß© X·∫øp H√¨nh Tr√°i Tim üíó</h2>
  <p>K√©o c√°c m·∫£nh v√†o khung tr√°i tim ‚Äî th·ª≠ xem gh√©p nhanh kh√¥ng nha üòò</p>

  <div class="board-wrap" id="board"></div>
  <div id="pieces"></div>

  <div style="margin-top:12px;">
    <button id="shuffleBtn">üîÄ X√°o l·∫°i m·∫£nh</button>
    <button id="resetBtn">‚ôªÔ∏è ƒê·∫∑t l·∫°i</button>
  </div>
</section>

<audio id="bg-music" loop>
  <source src="mylove.mp3" type="audio/mpeg">
</audio>

<script>
/* ========== PASSWORD + INTRO ========== */
function checkPassword() {
  const pw = document.getElementById('pwInput');
  if (pw.value==='1510'){
    const gate=document.getElementById('passwordGate');
    showOverlay(); // üî• Hi·ªÉn th·ªã overlay ngay l·∫≠p t·ª©c
    gate.style.opacity='0';
    setTimeout(()=>{ gate.style.display='none'; },800);
  } else {
    pw.classList.add('wrong'); pw.value='Wrong';
    setTimeout(()=>{pw.classList.remove('wrong'); pw.value='';},1000);
  }
}

function showOverlay(){
  const overlay=document.getElementById('intro');
  overlay.style.display='flex';
  const line1=document.getElementById('line1');
  const line2=document.getElementById('line2');
  const clickText=document.getElementById('clickText');
  const icons=["‚ù§Ô∏è","üí´","üåô","üíê","‚ú®"];
  const floatContainer=document.getElementById('floatingIcons');
  function createIcon(){
    const icon=document.createElement('div');
    icon.className='floating-icon';
    icon.textContent=icons[Math.floor(Math.random()*icons.length)];
    icon.style.left=Math.random()*100+'%';
    icon.style.bottom='-30px';
    icon.style.animationDuration=4+Math.random()*3+'s';
    floatContainer.appendChild(icon);
    setTimeout(()=>icon.remove(),7000);
  }
  setInterval(createIcon,500);
  setTimeout(()=>{ typeText("üéâ‚ù§Ô∏èHappy Anniversary‚ù§Ô∏èüéâ",line1,()=>{ typeText("October 2024 - October 2025",line2,()=>clickText.classList.add('visible')); });},2000);
  overlay.addEventListener('click',closeIntro);
}

function typeText(text,el,callback){
  let i=0;
  function typing(){
    if(i<text.length){ el.textContent+=text.charAt(i); i++; setTimeout(typing,100);}
    else if(callback) callback();
  } typing();
}

function closeIntro(){
  const overlay=document.getElementById('intro');
  overlay.style.transition='opacity 0.9s ease';
  overlay.style.opacity=0;
  document.body.style.backgroundColor='#0b0b1d';
  const music=document.getElementById('bg-music');
  music.volume=0.7; music.play().catch(()=>{});
  setTimeout(()=>overlay.style.display='none',900);
}

/* ========== SKY ELEMENTS ========== */
const sky=document.getElementById('sky'); const moon=document.getElementById('moon');
for(let i=0;i<150;i++){
  const s=document.createElement('div'); s.className='star';
  const size=Math.random()*2+1;
  s.style.width=size+'px'; s.style.height=size+'px';
  s.style.top=Math.random()*100+'%'; s.style.left=Math.random()*100+'%';
  s.style.animationDelay=Math.random()*3+'s';
  sky.appendChild(s);
}
function createShootingStar(){
  const s=document.createElement('div');
  s.className='shooting-star';
  s.style.top=Math.random()*40+'%'; s.style.left=Math.random()*60+'%';
  sky.appendChild(s);
  setTimeout(()=>s.remove(),1800);
}
setInterval(()=>{ if(Math.random()<0.4) createShootingStar();},4000);

/* ========== SECTION REVEAL ========== */
let moonShrinkActive=false; let walked=false;
const sections=document.querySelectorAll('section');
window.addEventListener('scroll',()=>{
  const trigger=window.innerHeight*0.8;
  sections.forEach(sec=>{
    if(sec.getBoundingClientRect().top<trigger){
      sec.classList.add('visible');
      if(sec.id==='section1') moonShrinkActive=true;
    }
  });
  if(moonShrinkActive){
    const scrollY=window.scrollY;
    moon.style.transform=`scale(${Math.max(0.7,1-scrollY/2500)})`;
    moon.style.opacity=Math.max(0.5,1-scrollY/1800);
  }
});

/* ========== MINI GAME ========== */
const board = document.getElementById("board");
const piecesContainer = document.getElementById("pieces");
const gridSize = 3;
const boardSize = 450;
const cellSize = boardSize / gridSize;

function createSlots() {
  board.innerHTML = "";
  for (let i = 0; i < gridSize * gridSize; i++) {
    const slot = document.createElement("div");
    slot.className = "slot";
    slot.dataset.index = i;
    slot.addEventListener("dragover", (e) => { e.preventDefault(); slot.classList.add("highlight"); });
    slot.addEventListener("dragleave", () => slot.classList.remove("highlight"));
    slot.addEventListener("drop", handleDrop);
    board.appendChild(slot);
  }
}

function createPieces(shuffle = true) {
  piecesContainer.innerHTML = "";
  const positions = [];
  for (let r = 0; r < gridSize; r++) {
    for (let c = 0; c < gridSize; c++) {
      positions.push({ r, c, idx: r * gridSize + c });
    }
  }
  if (shuffle) {
    for (let i = positions.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [positions[i], positions[j]] = [positions[j], positions[i]];
    }
  }
  positions.forEach((pos, i) => {
    const piece = document.createElement("div");
    piece.className = "piece";
    piece.id = "p-" + i;
    piece.style.backgroundPosition = `-${pos.c * cellSize}px -${pos.r * cellSize}px`;
    piece.dataset.correctIndex = pos.idx;
    piece.draggable = true;
    piece.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("text/plain", piece.id);
      e.dataTransfer.effectAllowed = "move";
    });
    piecesContainer.appendChild(piece);
  });
}

function handleDrop(e) {
  e.preventDefault();
  this.classList.remove("highlight");
  const pieceId = e.dataTransfer.getData("text/plain");
  const dragged = document.getElementById(pieceId);
  if (!dragged) return;
  if (this.querySelector(".piece")) return;
  this.appendChild(dragged);
  checkWin();
}

function checkWin() {
  const slots = board.querySelectorAll(".slot");
  let win = true;
  slots.forEach((slot, idx) => {
    const piece = slot.querySelector(".piece");
    if (!piece || parseInt(piece.dataset.correctIndex, 10) !== idx) win = false;
  });
  if (win) setTimeout(() => alert("üéâ B·∫°n ƒë√£ gh√©p xong h√¨nh tr√°i tim r·ªìi! üíó"), 100);
}

document.getElementById("shuffleBtn").addEventListener("click", () => createPieces(true));
document.getElementById("resetBtn").addEventListener("click", () => { createSlots(); createPieces(false); });

createSlots();
createPieces(true);
</script>
</body>
</html>
